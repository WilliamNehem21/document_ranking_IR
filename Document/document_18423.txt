In 202 BC, Rhodes and her allies Pergamum, Cyzicus, and Byzantium combined their fleets and defeated Philip at the Battle of Chios. Just a few months later, Philip's fleet defeated the Rhodians at Lade. While Philip was plundering Pergamese territory and attacking cities in Caria, Attalus I of Pergamum went to Athens to try to create a diversion. He succeeded in securing an alliance with the Athenians, who immediately declared war on the Macedonians. The King of Macedon could not remain inactive; he assailed Athens with his navy and with some infantry. The Romans warned him, however, to withdraw or face war with Rome. After suffering a defeat at the hands of the Rhodian and Pergamese fleets, Philip withdrew, but not before attacking the city of Abydos on the Hellespont. Abydos fell after a long siege and most of its inhabitants committed suicide. Philip rejected the Roman ultimatum to stop attacking Greek states and the Romans declared war on Macedon. This left the Cretan cities with no major allies, and the largest city of Crete, Knossos, joined the Rhodians. Faced with this combination, both Hierapytna and Olous surrendered and were forced to sign a treaty favourable to Rhodes and Knossos.